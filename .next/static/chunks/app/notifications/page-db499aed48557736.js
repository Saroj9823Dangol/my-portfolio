(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{2277:(e,t,i)=>{"use strict";i.d(t,{NotificationButton:()=>o});var r=i(7045);async function a(){if("serviceWorker"in navigator)try{return await navigator.serviceWorker.register("/sw.js")}catch(e){}return null}async function n(){if("Notification"in window)try{let e=await Notification.requestPermission();return"granted"===e}catch(e){}return!1}var s=i(8881);function o(){let[e,t]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),c=async()=>{o(!0);try{if(!await n()){alert("Please enable notifications in your browser settings");return}let e=await a();if(!e)throw Error("Service worker registration failed");let i=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BB5BVwNTrs9jEEOm2Z7UP0q3XSrG6IK4-eI8R20SZB2Q5MuZviKphMBfNcniEJzKvNBZihrW2GUh8HrDkaLow88"});if((await fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:i})})).ok)t(!0);else throw Error("Subscription failed")}catch(e){alert("Failed to subscribe to notifications")}finally{o(!1)}};return(0,r.jsx)("button",{onClick:c,disabled:e||i,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",children:i?"Processing...":e?"Subscribed!":"Enable Notifications"})}},4286:(e,t,i)=>{"use strict";i.d(t,{SendNotification:()=>n});var r=i(7045),a=i(8881);function n(){let[e,t]=(0,a.useState)(""),[i,n]=(0,a.useState)(!1),s=async()=>{if(e.trim()){n(!0);try{let i=await navigator.serviceWorker.ready,r=await i.pushManager.getSubscription();if(!r){alert("No active subscription found");return}if((await fetch("/api/notify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:r,message:e})})).ok)alert("Notification sent successfully!"),t("");else throw Error("Failed to send notification")}catch(e){alert("Failed to send notification")}finally{n(!1)}}};return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter notification message",className:"w-full p-2 border rounded"}),(0,r.jsx)("button",{onClick:s,disabled:i||!e.trim(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400",children:i?"Sending...":"Send Test Notification"})]})}},7815:(e,t,i)=>{Promise.resolve().then(i.bind(i,2277)),Promise.resolve().then(i.bind(i,4286))}},e=>{var t=t=>e(e.s=t);e.O(0,[650,74,358],()=>t(7815)),_N_E=e.O()}]);